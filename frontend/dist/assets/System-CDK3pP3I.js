import{_ as y,l as c,e as n,f as a,g as s,w as g,j as p,k as d,B as m,t as h,q as u}from"./index-BX7DgPRM.js";import{c as v,a as _}from"./index.esm-BakSTS1U.js";const b={beforeCreate(){this.checkConfig=c.debounce(e=>{const r=this;c.each(e,(i,l)=>{r.validateConfigurations(l,e)})},500),this.checkPesapal=c.debounce(e=>{const r=this;c.each(e,(i,l)=>{r.validatePesapalConfigurations(l,e)})},500)},beforeRouteEnter(e,r,i){i(l=>{l.fetchConfigurations(),i()})},data(){return{errors:{},configurations:{amrod:{auth_uri:"",username:"",password:"",account_number:"",vendor_uri:""},pesapal:{consumer_key:"",consumer_secret:""}},loading:{updating:!1},isDisabled:!0}},created(){this.$has=c.has,this.$isEmpty=c.isEmpty,this.configSchema=v().shape({auth_uri:_().required("*Auth URI is required"),username:_().email("*Enter a valid email address").required("*Username is required"),password:_().required("*Password is required"),account_number:_().required("*Account Number is required"),vendor_uri:_().required("*Vendor URI is required")}),this.configPesapalSchema=v().shape({consumer_key:_().required("*Consuner key is required"),consumer_secret:_().required("*Consumer secret is required")})},methods:{fetchConfigurations(){this.$store.commit("loader",!0),this.$api.get("/system").then(({data:{configurations:e}})=>{this.configurations=c.cloneDeep(e)}).catch(({response:e})=>{}).finally(()=>{this.$store.commit("loader",!1)})},updateConfigurations(){this.loading.updating=!0,this.isDisabled=!0,this.$api.post("/system/configurations",this.configurations).then(({data:{company:e}})=>{}).catch(({response:e})=>{}).finally(()=>{this.loading.updating=!1})},validateConfigurations(e,r){this.configSchema.validateAt(e,r).then((i,l)=>{delete this.errors[e]}).catch(i=>{this.errors[i.path]=i.message})},validatePesapalConfigurations(e,r){this.configPesapalSchema.validateAt(e,r).then((i,l)=>{delete this.errors[e]}).catch(i=>{this.errors[i.path]=i.message})}},watch:{errors:{handler(e){this.isDisabled=!c.isEmpty(e)},deep:!0},"configurations.amrod":{handler(e){this.checkConfig(e)},deep:!0,immediate:!0},"configurations.pesapal":{handler(e){this.checkPesapal(e)},deep:!0,immediate:!0}}},k={class:"container-fluid"},w={class:"page-header"},S={class:"row"},C=s("div",{class:"col-lg-6"},[s("div",{class:"page-header-left"},[s("h3",null,[p(" System Profile "),s("small",null,"Multikart Admin panel")])])],-1),q={class:"col-lg-6"},E={class:"breadcrumb pull-right"},U={class:"breadcrumb-item"},P=s("i",{"data-feather":"home"},null,-1),V=s("li",{class:"breadcrumb-item"},"Settings",-1),A=s("li",{class:"breadcrumb-item active"},"System",-1),D={class:"container-fluid"},I={class:"row"},N={class:"col-xl-5 col-lg-5 col-md-6"},R={class:"card"},B={class:"card-body"},x={class:"row"},M=s("div",{class:"col-12"},[s("h4",null,[s("strong",null,"Amrod API Settings")]),s("hr")],-1),O={class:"col-12"},T={class:"form-group"},j=s("label",{for:"vendor_uri"},"Vendor URI",-1),K={key:0,class:"text-danger col col-12 mb-0"},z={class:"col-12"},F={class:"form-group"},G=s("label",{for:"auth_uri"},"Auth URI",-1),H={key:0,class:"text-danger col col-12 mb-0"},J={class:"col-12"},L={class:"form-group"},Q=s("label",{for:"account_number"},"Account Number",-1),W={key:0,class:"text-danger col col-12 mb-0"},X={class:"col-12"},Y={class:"form-group"},Z=s("label",{for:"username"},"Username",-1),$={key:0,class:"text-danger col col-12 mb-0"},ss={class:"col-12"},es={class:"form-group"},os=s("label",{for:"password"},"Password",-1),rs={key:0,class:"text-danger col col-12 mb-0"},ts=s("div",{class:"col-12"},[s("h4",null,[s("strong",null,"Pesapal API Settings")]),s("hr")],-1),is={class:"col-12"},ns={class:"form-group"},as=s("label",{for:"consumer_key"},"Consumer Key",-1),ls={key:0,class:"text-danger col col-12 mb-0"},cs={class:"col-12"},us={class:"form-group"},ds=s("label",{for:"consumer_secret"},"Consumer Secret",-1),ms={key:0,class:"text-danger col col-12 mb-0"},hs={class:"col-12"},_s=["disabled"],ps={key:0,class:"fa fa-spinner fa-spin"};function fs(e,r,i,l,o,f){return n(),a("div",null,[s("div",k,[s("div",w,[s("div",S,[C,s("div",q,[s("ol",E,[s("li",U,[s("a",{href:"#",onClick:r[0]||(r[0]=g(t=>e.router.push({name:"Overview"}),["prevent"]))},[P,p(" Overview ")])]),V,A])])])])]),s("div",D,[s("div",I,[s("div",N,[s("div",R,[s("div",B,[s("div",x,[s("form",{onSubmit:r[8]||(r[8]=g((...t)=>f.updateConfigurations&&f.updateConfigurations(...t),["prevent"]))},[M,s("div",O,[s("div",T,[j,d(s("input",{class:"form-control",id:"vendor_uri",type:"text","onUpdate:modelValue":r[1]||(r[1]=t=>o.configurations.amrod.vendor_uri=t)},null,512),[[m,o.configurations.amrod.vendor_uri]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"vendor_uri")?(n(),a("p",K,h(o.errors.vendor_uri),1)):u("",!0)])]),s("div",z,[s("div",F,[G,d(s("input",{class:"form-control",id:"auth_uri",type:"text","onUpdate:modelValue":r[2]||(r[2]=t=>o.configurations.amrod.auth_uri=t)},null,512),[[m,o.configurations.amrod.auth_uri]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"auth_uri")?(n(),a("p",H,h(o.errors.auth_uri),1)):u("",!0)])]),s("div",J,[s("div",L,[Q,d(s("input",{class:"form-control",id:"account_number",type:"text","onUpdate:modelValue":r[3]||(r[3]=t=>o.configurations.amrod.account_number=t)},null,512),[[m,o.configurations.amrod.account_number]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"account_number")?(n(),a("p",W,h(o.errors.account_number),1)):u("",!0)])]),s("div",X,[s("div",Y,[Z,d(s("input",{class:"form-control",id:"username",type:"text","onUpdate:modelValue":r[4]||(r[4]=t=>o.configurations.amrod.username=t)},null,512),[[m,o.configurations.amrod.username]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"username")?(n(),a("p",$,h(o.errors.username),1)):u("",!0)])]),s("div",ss,[s("div",es,[os,d(s("input",{class:"form-control",id:"password",type:"password","onUpdate:modelValue":r[5]||(r[5]=t=>o.configurations.amrod.password=t)},null,512),[[m,o.configurations.amrod.password]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"password")?(n(),a("p",rs,h(o.errors.password),1)):u("",!0)])]),ts,s("div",is,[s("div",ns,[as,d(s("input",{class:"form-control",id:"consumer_key",type:"text","onUpdate:modelValue":r[6]||(r[6]=t=>o.configurations.pesapal.consumer_key=t)},null,512),[[m,o.configurations.pesapal.consumer_key]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"consumer_key")?(n(),a("p",ls,h(o.errors.consumer_key),1)):u("",!0)])]),s("div",cs,[s("div",us,[ds,d(s("input",{class:"form-control",id:"consumer_secret",type:"password","onUpdate:modelValue":r[7]||(r[7]=t=>o.configurations.pesapal.consumer_secret=t)},null,512),[[m,o.configurations.pesapal.consumer_secret]]),!e.$isEmpty(o.errors)&&e.$has(o.errors,"consumer_secret")?(n(),a("p",ms,h(o.errors.consumer_secret),1)):u("",!0)])]),s("div",hs,[s("button",{class:"btn btn-primary",disabled:o.isDisabled||o.loading.updating},[o.loading.updating?(n(),a("i",ps)):u("",!0),p(" Save Changes ")],8,_s)])],32)])])])])])])])}const ys=y(b,[["render",fs]]);export{ys as default};
