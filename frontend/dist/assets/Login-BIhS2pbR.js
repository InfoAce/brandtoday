import{u as y,a as x,i as d,r as E,o as k,l as r,A as B,e as c,f as m,g as s,w as S,k as i,B as u,v as f,h as p,t as h,q,j as D,C as V}from"./index-BX7DgPRM.js";import{c as j,a as g}from"./index.esm-BakSTS1U.js";const A={class:"page-wrapper"},C={class:"authentication-box"},L={class:"container"},M={class:"row justify-content-center"},N={class:"col-md-7 p-0"},O={class:"card tab2-card card-login"},P={class:"card-body"},F=s("div",{class:"col-12 text-center my-4"},[s("h2",null,"Login"),s("p",{class:"text-danger"},"Enter valid credentials.")],-1),R={class:"form-group"},T={class:"form-group"},U=s("div",{class:"form-terms my-4"},[s("div",{class:"form-check mesm-2"},[s("a",{href:"javascript:void(0)",class:"forgot-pass"},"Forgot Password!")])],-1),Y={class:"form-button"},z=["disabled"],G={key:0,class:"fa fa-spinner fa-spin"},K={__name:"Login",setup(H){const n=y();x();const _=d("$api"),l=d("$swal"),o=E({errors:{},form:{email:"",password:""},loading:{login:!1},isDisabled:!0}),v=j().shape({email:g().email("*Enter a valid email address").required("*Email address is required"),password:g().required("*Password is required")}),w=a=>{v.validateAt(a,o.form).then((e,t)=>{delete o.errors[a]}).catch(e=>{o.errors[e.path]=e.message}).finally(()=>{o.isDisabled=!r.isEmpty(o.errors)})},b=()=>{o.loading.login=!0,_.post("/auth/login",o.form).then(({data:{user:a,token:e}})=>{n.commit("auth",{user:a,token:e}),window.location.reload()}).catch(({response:a})=>{n.commit("loader",!1),!r.isEmpty(a.data)&&a.data.statusCode==400&&a.data.message.forEach(e=>{V.info(e)}),a.status==404&&l.fire({icon:"error",title:"Oops!",text:"Sorry we could not your account. Register a new account."}),a.status==401&&l.fire({icon:"error",title:"Oops!",text:"Your email or password is incorrect."}),a.status==403&&l.fire({icon:"error",title:"Oops!",text:"Your account has not been verified"})}).finally(()=>{o.loading.login=!1})};return k(r.debounce(()=>{$(".single-item").slick({arrows:!1,dots:!0})},0)),B(()=>o.form,a=>{r.each(a,(e,t)=>{w(t)})},{deep:!0}),(a,e)=>(c(),m("div",A,[s("div",C,[s("div",L,[s("div",M,[s("div",N,[s("div",O,[s("div",P,[F,s("form",{class:"form-horizontal auth-form",onSubmit:S(b,["prevent"]),autocomplete:"off"},[s("div",R,[i(s("input",{name:"email",type:"email",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.email=t),placeholder:"Email Address"},null,512),[[u,o.form.email]]),i(s("p",{class:"text-danger mb-0"},h(o.errors.email),513),[[f,p(r.has)(o.errors,"email")]])]),s("div",T,[i(s("input",{name:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.password=t),class:"form-control",placeholder:"Password"},null,512),[[u,o.form.password]]),i(s("p",{class:"text-danger mb-0"},h(o.errors.password),513),[[f,p(r.has)(o.errors,"password")]])]),U,s("div",Y,[s("button",{class:"btn btn-dark",disabled:o.isDisabled||o.loading.login,type:"submit"},[o.loading.login?(c(),m("i",G)):q("",!0),D(" Login ")],8,z)])],32)])])])])])])]))}};export{K as default};
