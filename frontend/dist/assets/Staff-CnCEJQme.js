import{z as A,u as F,a as U,i as $,r as j,A as B,o as L,e as r,f as i,g as e,w as O,h as l,j as y,F as P,m as I,t as c,q as u,n as R,k as m,B as b,v,l as d,y as T,C as z,s as J,x as Y,_ as G}from"./index-BX7DgPRM.js";import{c as H,a as g}from"./index.esm-BakSTS1U.js";import{h as K}from"./moment-C5S46NFB.js";import{P as Q}from"./vuejs-paginate-next.es-BnsLbC_D.js";const o=_=>(J("data-v-a91bb962"),_=_(),Y(),_),W={class:"container-fluid"},X={class:"page-header"},Z={class:"row"},ee=o(()=>e("div",{class:"col-lg-6"},[e("div",{class:"page-header-left"},[e("h3",null,"Staff"),e("p",null,"List of registered staff members.")])],-1)),se={class:"col-lg-6"},te={class:"breadcrumb pull-right"},ae={class:"breadcrumb-item"},oe=o(()=>e("i",{"data-feather":"home"},null,-1)),le=o(()=>e("li",{class:"breadcrumb-item"},"Data management",-1)),re=o(()=>e("li",{class:"breadcrumb-item active"},"Staff members",-1)),ie={class:"container-fluid"},de={class:"row"},ne={class:"col-sm-12"},ce={class:"card"},me=T('<div class="card-header py-4" data-v-a91bb962><form class="form-inline search-form search-box" data-v-a91bb962><div class="form-group" data-v-a91bb962><input class="form-control-plaintext" type="search" placeholder="Search.." data-v-a91bb962></div></form><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addstaff" data-v-a91bb962>Add User</button></div>',1),_e={class:"card-body"},fe={class:"table-responsive table-desi"},he={class:"review-table table"},ue=o(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Avatar"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Phone Number"),e("th",null,"Active"),e("th",null,"Joined On"),e("th")])],-1)),pe=["src","alt"],be={key:1},ve=o(()=>e("i",{class:"fa fa-user-circle"},null,-1)),ge=[ve],ye={key:0,class:"td-check"},xe=o(()=>e("i",{"data-feather":"check-circle"},null,-1)),Se=[xe],ke={key:1,class:"td-cross"},$e=o(()=>e("i",{"data-feather":"x-circle"},null,-1)),Ne=[$e],we={key:1},Ee=o(()=>e("td",{colspan:"8",class:"text-center"},[e("h4",{class:"mb-0"},[e("i",{class:"fa fa-exclamation-triangle"}),y(" No user found.")])],-1)),Me=[Ee],Ce={key:0,class:"col-12 py-4 d-flex justify-content-center"},De={class:"modal theme-modal fade bd-example-modal-lg",id:"addstaff",tabindex:"-1",role:"dialog"},Ve={class:"modal-dialog modal-dialog-centered",role:"document"},qe={class:"modal-content"},Ae=o(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Staff Member"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"Ã—")])],-1)),Fe={class:"modal-body"},Ue={class:"form-group"},je=o(()=>e("label",{for:"first_name",class:"col-form-label"},"First Name",-1)),Be={class:"form-group"},Le=o(()=>e("label",{for:"last_name",class:"col-form-label"},"Last Name",-1)),Oe={class:"form-group"},Pe=o(()=>e("label",{for:"email",class:"col-form-label"},"Email Address",-1)),Ie={class:"modal-footer"},Re=["disabled"],Te={key:0,class:"fa fa-spinner fa-spin"},ze=A({__name:"Staff",setup(_){const p=F(),N=U(),x=$("$api");$("$swal");const w=K,f=d.isEmpty,E=d.isNull,s=j({clients:Object(),errors:Object(),form:{first_name:"",last_name:"",email:""},loader:{register:!1},isDisabled:!0}),M=H().shape({first_name:g().required("*First name is required"),email:g().email("*Enter a valid email address").required("*Email address is required"),last_name:g().required("*Last name is required")}),C=n=>{M.validateAt(n,s.form).then((a,t)=>{delete s.errors[n]}).catch(a=>{s.errors[a.path]=a.message}).finally(()=>{s.isDisabled=!d.isEmpty(s.errors)})},S=(n={page:1,limit:10})=>{p.commit("loader",!0);let{page:a,limit:t}=n,h=`/users?type=staff&page=${a}&limit=${t}`;x.get(h).then(({data:{users:k}})=>{d.set(s,"clients",d.cloneDeep(k))}).catch(({response:k})=>{p.commit("loader",!1)}).finally(()=>{p.commit("loader",!1)})},D=()=>{s.loader.register=!0,x.post("users",s.form).then(()=>{z.info("Staff member has been successfully added. Registration email has been sent."),q(),S()}).catch(({response:n})=>{s.loader.register=!1}).finally(()=>{s.loader.register=!1})},V=()=>{},q=()=>{d.set(s,"form",{first_name:"",last_name:"",email:""})};return B(()=>s.form,n=>{d.each(n,(a,t)=>{C(t)})},{deep:!0}),L(()=>S()),(n,a)=>(r(),i("div",null,[e("div",W,[e("div",X,[e("div",Z,[ee,e("div",se,[e("ol",te,[e("li",ae,[e("a",{href:"#",onClick:a[0]||(a[0]=O(t=>l(N).push({name:"Overview"}),["prevent"]))},[oe,y(" Overview ")])]),le,re])])])])]),e("div",ie,[e("div",de,[e("div",ne,[e("div",ce,[me,e("div",_e,[e("div",fe,[e("table",he,[ue,e("tbody",null,[l(f)(s.clients.items)?(r(),i("tr",we,Me)):(r(!0),i(P,{key:0},I(s.clients.items,(t,h)=>(r(),i("tr",{key:h},[e("td",null,c(h+1),1),e("td",null,[l(E)(t.image)?(r(),i("h2",be,ge)):(r(),i("img",{key:0,src:`${n.backendUri}${t.image}`,alt:`${t.first_name} ${t.last_name}`},null,8,pe))]),e("td",null,c(t.first_name)+" "+c(t.last_name),1),e("td",null,c(t.email),1),e("td",null,c(t.phone_number),1),l(f)(t.email_verified_at)?u("",!0):(r(),i("td",ye,Se)),l(f)(t.email_verified_at)?(r(),i("td",ke,Ne)):u("",!0),e("td",null,c(l(w)(t.created_at).format("Do MMMM, Y")),1)]))),128))])])]),l(f)(s.clients)?u("",!0):(r(),i("div",Ce,[R(l(Q),{"page-count":s.clients.meta.itemCount,"click-handler":V,"prev-text":"Prev","next-text":"Next","container-class":"className"},null,8,["page-count"])]))])])])])]),e("div",De,[e("div",Ve,[e("div",qe,[Ae,e("div",Fe,[e("div",Ue,[je,m(e("input",{type:"text",class:"form-control",id:"first_name","onUpdate:modelValue":a[1]||(a[1]=t=>s.form.first_name=t)},null,512),[[b,s.form.first_name]]),m(e("p",{class:"text-danger col col-12 mb-4"},c(s.errors.first_name),513),[[v,l(d.has)(s.errors,"first_name")]])]),e("div",Be,[Le,m(e("input",{type:"text",class:"form-control",id:"last_name","onUpdate:modelValue":a[2]||(a[2]=t=>s.form.last_name=t)},null,512),[[b,s.form.last_name]]),m(e("p",{class:"text-danger col col-12 mb-4"},c(s.errors.last_name),513),[[v,l(d.has)(s.errors,"last_name")]])]),e("div",Oe,[Pe,m(e("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":a[3]||(a[3]=t=>s.form.email=t)},null,512),[[b,s.form.email]]),m(e("p",{class:"text-danger col col-12 mb-4"},c(s.errors.email),513),[[v,l(d.has)(s.errors,"email")]])])]),e("div",Ie,[e("button",{onClick:a[4]||(a[4]=()=>D()),class:"btn btn-primary",type:"button",disabled:s.isDisabled||s.loader.register},[s.loader.register?(r(),i("i",Te)):u("",!0),y(" Create ")],8,Re)])])])])]))}}),Ke=G(ze,[["__scopeId","data-v-a91bb962"]]);export{Ke as default};
