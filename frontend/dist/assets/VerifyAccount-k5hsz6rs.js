import{z as g,i as y,u as k,r as x,D as S,a as B,A as V,o as $,l as a,b as D,e as P,f as E,g as s,k as i,v as c,h as d,w as j,B as p,t as m}from"./index-BX7DgPRM.js";import{c as q,a as u,d as A}from"./index.esm-BakSTS1U.js";const M={class:"page-wrapper"},O={class:"authentication-box"},C={class:"container"},U={class:"row justify-content-center align-items-center h-100"},z={class:"col-md-7 p-0"},R={class:"card tab2-card card-login bg-primary"},T={class:"card-body"},F={class:"col-12 text-center"},N=s("h3",null,"Account Verification",-1),G=s("p",null,"Verify your email address and set the account password.",-1),H=s("i",{class:"fa fa-spinner fa-spin fa-lg"},null,-1),I=[H],J={class:"col-12"},K={class:"form-group"},L=s("label",{for:"password",class:"col-form-label"},"Password",-1),Q={class:"form-group"},W=s("label",{for:"confirm_password",class:"col-form-label"},"Confirm Password",-1),X={class:"col-12 text-center"},Y=["disabled"],es=g({__name:"VerifyAccount",setup(Z){const f=y("$api"),n=k(),o=x({errors:Object(),form:{confirm_password:"",password:""},isDisabled:!0,loading:{verify:!1},user:Object()}),{params:{token:_}}=S(),l=B(),h=()=>{f.put(`/auth/user/${_}`).then(({data:{user:e}})=>{a.set(o,"user",e)}).catch(e=>{if(a.has(e,"response"))switch(e.response.status){case 422:break;case 404:l.push({name:"VerifyError404"});break}}).finally(()=>{n.commit("loader",!1)})},w=()=>{o.loading.verify=!0},v=q().shape({confirm_password:u().required("*Confirmation password is required").oneOf([A("password"),null],"Password mismatch"),password:u().required("*Password is required")}),b=e=>{v.validateAt(e,o.form).then((r,t)=>{delete o.errors[e]}).catch(r=>{o.errors[r.path]=r.message}).finally(()=>{o.isDisabled=!a.isEmpty(o.errors)})};return V(()=>o.form,e=>{a.each(e,(r,t)=>{b(t)})},{deep:!0}),$(()=>{n.commit("loader",!0),a.isEmpty(n.getters.authUser)||l.push({name:"Overview"})}),D(a.debounce(()=>h(),500)),(e,r)=>(P(),E("div",M,[s("div",O,[s("div",C,[s("div",U,[s("div",z,[s("div",R,[s("div",T,[s("div",F,[N,G,i(s("h3",null,I,512),[[c,d(n).getters.loader]])]),s("div",J,[s("form",{class:"form-horizontal auth-form",onSubmit:j(w,["prevent"])},[s("div",K,[L,i(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":r[0]||(r[0]=t=>o.form.password=t)},null,512),[[p,o.form.password]]),i(s("p",{class:"text-danger col col-12 mb-4"},m(o.errors.password),513),[[c,d(a.has)(o.errors,"password")]])]),s("div",Q,[W,i(s("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":r[1]||(r[1]=t=>o.form.confirm_password=t)},null,512),[[p,o.form.confirm_password]]),i(s("p",{class:"text-danger col col-12 mb-4"},m(o.errors.confirm_password),513),[[c,d(a.has)(o.errors,"confirm_password")]])]),s("div",X,[s("button",{class:"btn btn-dark",disabled:o.isDisabled},"Save Password",8,Y)])],32)])])])])])])])]))}});export{es as default};
