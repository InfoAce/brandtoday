import{u as E,a as C,i as _,r as N,A as V,d as k,e as f,f as h,g as s,n as b,p as P,w as A,k as t,B as m,v as n,h as l,t as c,q as D,j as w,l as a,C as O}from"./index-BX7DgPRM.js";import{c as U,a as d,d as B}from"./index.esm-BakSTS1U.js";import{v as F}from"./vue3-tel-input-CyuV4Icx.js";const T={class:"breadcrumb-section"},j={class:"container"},I={class:"row"},L=s("div",{class:"col-sm-6"},[s("div",{class:"page-title"},[s("h2",null,"create account")])],-1),M={class:"col-sm-6"},R={"aria-label":"breadcrumb",class:"theme-breadcrumb"},H={class:"breadcrumb"},K={class:"breadcrumb-item"},Y=s("li",{class:"breadcrumb-item active","aria-current":"page"},"create account",-1),z={class:"register-page section-b-space"},G={class:"container"},J={class:"row"},Q={class:"col-lg-12"},W=s("h3",null,"create account",-1),X={class:"theme-card"},Z={class:"form-row row"},ss={class:"col-md-6"},es=s("label",{for:"fname"},"First Name",-1),os={class:"col-md-6"},rs=s("label",{for:"lname"},"Last Name",-1),ts={class:"form-row row"},as={class:"col-md-6"},is=s("label",{for:"email"},"email",-1),ls={class:"col-md-6"},ns=s("label",{for:"phone"},"Phone Number",-1),cs={class:"col-md-6"},ds=s("label",{for:"password"},"Password",-1),ms={class:"col-md-6"},us=s("label",{for:"confirm_password"},"Confirm Password",-1),ps={class:"col-md-12 text-center"},_s=["disabled"],fs={key:0},hs=s("i",{class:"fa fa-spinner fa-spin"},null,-1),bs=[hs],ws={mounted(){$(".vti__input").addClass("m-0 p-2")}},qs=Object.assign(ws,{__name:"Signup",setup(vs){const v=E();C();const g=_("$api"),p=_("$swal"),e=N({errors:{},form:{first_name:"",last_name:"",email:"",password:"",phone_number:"",confirm_password:""},loader:{signup:!1},isDisabled:!0}),x=U().shape({first_name:d().required("*First name is required"),email:d().email("*Enter a valid email address").required("*Email address is required"),last_name:d().required("*Last name is required"),phone_number:d().required("*Phone number is required"),confirm_password:d().required("*Confirmation password is required").oneOf([B("password"),null],"Password mismatch"),password:d().required("*Password is required")}),y=r=>{x.validateAt(r,e.form).then((o,u)=>{delete e.errors[r]}).catch(o=>{e.errors[o.path]=o.message}).finally(()=>{console.log(!a.isEmpty(e.errors)),e.isDisabled=!a.isEmpty(e.errors)})},q=()=>{e.loader.signup=!0,g.post("/auth/signup",e.form).then(()=>{p.fire({icon:"success",title:"Alright!",text:"Account successfully created. Check your email for account verification."})}).catch(({response:r})=>{v.commit("loader",!1),!a.isEmpty(r.data)&&r.data.statusCode==400&&r.data.message.forEach(o=>{O.info(o)}),r.status==404&&p.fire({icon:"error",title:"Oops!",text:"Sorry we could not your account. Register router-link new account."}),r.status==401&&p.fire({icon:"error",title:"Oops!",text:"Your email or password is incorrect."})}).finally(()=>{e.loader.signup=!1})},S=r=>{e.form.phone_number=r.constructor==String?r:r.target.value};return V(()=>e.form,r=>{a.each(r,(o,u)=>{y(u)})},{deep:!0}),(r,o)=>{const u=k("router-link");return f(),h("div",null,[s("div",T,[s("div",j,[s("div",I,[L,s("div",M,[s("nav",R,[s("ol",H,[s("li",K,[b(u,{to:"/"},{default:P(()=>[w("Home")]),_:1})]),Y])])])])])]),s("section",z,[s("div",G,[s("div",J,[s("div",Q,[W,s("div",X,[s("form",{class:"theme-form",onSubmit:A(q,["prevent"])},[s("div",Z,[s("div",ss,[es,t(s("input",{type:"text",class:"form-control mb-2",autocomplete:"off",id:"fname","onUpdate:modelValue":o[0]||(o[0]=i=>e.form.first_name=i),placeholder:"First Name",required:""},null,512),[[m,e.form.first_name]]),t(s("p",{class:"text-danger col col-12 mb-4"},c(e.errors.first_name),513),[[n,l(a.has)(e.errors,"first_name")]])]),s("div",os,[rs,t(s("input",{type:"text",class:"form-control mb-2",autocomplete:"off",id:"lname","onUpdate:modelValue":o[1]||(o[1]=i=>e.form.last_name=i),placeholder:"Last Name",required:""},null,512),[[m,e.form.last_name]]),t(s("p",{class:"text-danger col col-12 mb-4"},c(e.errors.last_name),513),[[n,l(a.has)(e.errors,"last_name")]])])]),s("div",ts,[s("div",as,[is,t(s("input",{type:"text",class:"form-control mb-2",autocomplete:"off",id:"email","onUpdate:modelValue":o[2]||(o[2]=i=>e.form.email=i),placeholder:"Email",required:""},null,512),[[m,e.form.email]]),t(s("p",{class:"text-danger col col-12 mb-4"},c(e.errors.email),513),[[n,l(a.has)(e.errors,"email")]])]),s("div",ls,[ns,b(l(F.VueTelInput),{onInput:S,defaultCountry:"KE",inputOptions:{styleClasses:"form-control m-2",placeholder:"Phone Number"},mode:"international"}),t(s("p",{class:"text-danger col col-12 mb-4"},c(e.errors.phone_number),513),[[n,l(a.has)(e.errors,"phone_number")]])]),s("div",cs,[ds,t(s("input",{type:"password",class:"form-control mb-2",id:"password",placeholder:"Enter your password","onUpdate:modelValue":o[3]||(o[3]=i=>e.form.password=i),required:""},null,512),[[m,e.form.password]]),t(s("p",{class:"text-danger col col-12 mb-4"},c(e.errors.password),513),[[n,l(a.has)(e.errors,"password")]])]),s("div",ms,[us,t(s("input",{type:"password",class:"form-control mb-2",id:"confirm_password",placeholder:"Enter password confirmation","onUpdate:modelValue":o[4]||(o[4]=i=>e.form.confirm_password=i),required:""},null,512),[[m,e.form.confirm_password]]),t(s("p",{class:"text-danger col col-12 mb-4"},c(e.errors.confirm_password),513),[[n,l(a.has)(e.errors,"confirm_password")]])]),s("div",ps,[s("button",{class:"btn btn-solid w-auto mt-4",disabled:e.isDisabled||e.loader.signup},[e.loader.signup?(f(),h("span",fs,bs)):D("",!0),w(" Create Account ")],8,_s)])])],32)])])])])])])}}});export{qs as default};
