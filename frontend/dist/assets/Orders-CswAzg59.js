import{z as C,c as E,l as d,A as L,e as n,f as c,g as t,j as M,t as e,F as I,m as N,h as i,q as g,u as H,a as A,i as S,r as F,M as z,o as U,w as j,n as q,s as Y,x as G,_ as K}from"./index-BX7DgPRM.js";import{c as Q,a as O}from"./index.esm-BakSTS1U.js";import{h as D}from"./moment-C5S46NFB.js";import{P as R}from"./vuejs-paginate-next.es-BnsLbC_D.js";import"./vue-dropzone.vue_vue_type_style_index_0_lang-B11SuGN4.js";const J={class:"modal theme-modal fade bd-example-modal-lg",id:"editorder",tabindex:"-1",role:"dialog"},W={class:"modal-dialog modal-dialog-centered modal-xl",role:"document"},X={class:"modal-content"},Z={class:"modal-header"},tt=t("h5",{class:"modal-title",id:"exampleModalLabel"},"View Order",-1),et=t("span",{"aria-hidden":"true"},"Ã—",-1),st=[et],ot={class:"modal-body"},at={class:"container-fluid"},lt={class:"row"},it={class:"col-12 px-0"},dt={class:"bg-inner cart-section order-details-table"},nt={class:"row g-4"},ct={class:"col-xl-8"},rt={class:"card-details-title"},_t={class:"table-responsive table-details"},ut={class:"table cart-table table-borderless"},ht=t("thead",null,[t("tr",null,[t("th",{colspan:"2"},"Items"),t("th",{class:"text-end",colspan:"2"},[t("a",{href:"javascript:void(0)",class:"theme-color"},"Edit Items")])])],-1),mt={href:"javascript:void(0)"},pt=["src"],vt=t("p",null,"Quantity",-1),ft=t("p",null,"Price",-1),bt={class:"text-end"},yt=t("p",null,"Total",-1),$t={class:"table-order"},gt=t("td",{colspan:"3"},[t("h4",{class:"theme-color fw-bold"},"Total Price :")],-1),wt={class:"text-end"},xt={class:"theme-color fw-bold"},Ot={key:0,class:"col-xl-4"},Mt={class:"row g-4"},kt={class:"col-12"},Et={class:"order-success"},St=t("h4",null,"summary",-1),jt={class:"order-details"},qt=t("div",{class:"col-12"},[t("div",{class:"order-success"},[t("h4",null,"shipping address"),t("ul",{class:"order-details"},[t("li",null,"Gerg Harvell"),t("li",null,"568, Suite Ave."),t("li",null,"Austrlia, 235153 Contact No. 48465465465")])])],-1),Ct={class:"col-12"},It={key:0,class:"order-success"},Nt={class:"payment-mode"},Dt=t("h4",null,"payment method",-1),Tt={class:"list-group"},Pt={class:"list-item"},Vt={class:"list-item"},Bt={key:1,class:"order-success"},Lt={class:"payment-mode"},Ht=t("h4",null,"payment method",-1),At={class:"list-group"},Ft={class:"list-item"},zt={class:"list-item"},Ut=t("div",{class:"modal-footer"},[t("button",{class:"btn btn-primary",type:"button"}," Save Changes ")],-1),Yt=C({__name:"EditOrder",props:{data:{default:()=>Object(),type:Object},show:{default:!1,type:Boolean}},setup(h){const p=h,s=E(()=>p.data),b=E(()=>d.isEmpty(p.data)?0:s.value.items.map(a=>a.price*a.quantity).reduce((a,m)=>a+m,0));return L(()=>p.show,a=>{a===!0&&$("#editorder").modal("show"),a===!1&&$("#editorder").modal("hide")}),(a,m)=>(n(),c("div",J,[t("div",W,[t("div",X,[t("div",Z,[tt,t("button",{type:"button",class:"btn-close",onClick:m[0]||(m[0]=r=>a.$emit("update-modal",!1)),"aria-label":"Close"},st)]),t("div",ot,[t("div",at,[t("div",lt,[t("div",it,[t("div",dt,[t("div",nt,[t("div",ct,[t("div",rt,[t("h3",null,[M("Order Number "),t("span",null,e(s.value.num_id),1)])]),t("div",_t,[t("table",ut,[ht,t("tbody",null,[(n(!0),c(I,null,N(s.value.items,(r,o)=>(n(),c("tr",{class:"table-order",key:o},[t("td",null,[t("a",mt,[t("img",{src:r.image,class:"img-fluid blur-up lazyload",alt:""},null,8,pt)]),t("h5",null,e(r.name),1)]),t("td",null,[vt,t("h5",null,e(r.quantity),1)]),t("td",null,[ft,t("h5",null,e(r.price),1)]),t("td",bt,[yt,t("h5",null,e(r.price*r.quantity),1)])]))),128))]),t("tfoot",null,[t("tr",$t,[gt,t("td",wt,[t("h4",xt,e(b.value),1)])])])])])]),i(d.isEmpty)(s.value)?g("",!0):(n(),c("div",Ot,[t("div",Mt,[t("div",kt,[t("div",Et,[St,t("ul",jt,[t("li",null,"Order ID: "+e(s.value.num_id),1),t("li",null,"Order Date: "+e(i(D)(s.value.created_at).format("D MMMM Y")),1),t("li",null,"Order Total: "+e(b.value),1)])])]),qt,t("div",Ct,[i(d.isEmpty)(i(d.get)(s.value,"transaction"))?g("",!0):(n(),c("div",It,[t("div",Nt,[Dt,t("ul",Tt,[t("li",Pt,"Payment Method: "+e(s.value.transaction.payment_method),1),t("li",Vt,"Transaction Id: "+e(s.value.transaction.confirmation_code),1)])])])),i(d.isEmpty)(i(d.get)(s.value,"transaction"))?(n(),c("div",Bt,[t("div",Lt,[Ht,t("ul",At,[t("li",Ft,"Payment Method: "+e(s.value.transaction.payment_method),1),t("li",zt,"Transaction Id: "+e(s.value.transaction.confirmation_code),1)])])])):g("",!0)])])]))])])])])])]),Ut])])]))}}),u=h=>(Y("data-v-f0186643"),h=h(),G(),h),Gt={class:"container-fluid"},Kt={class:"page-header"},Qt={class:"row"},Rt=u(()=>t("div",{class:"col-lg-6"},[t("div",{class:"page-header-left"},[t("h3",null,"Orders"),t("p",null,"List of created orders.")])],-1)),Jt={class:"col-lg-6"},Wt={class:"breadcrumb pull-right"},Xt={class:"breadcrumb-item"},Zt=u(()=>t("i",{"data-feather":"home"},null,-1)),te=u(()=>t("li",{class:"breadcrumb-item"},"Data management",-1)),ee=u(()=>t("li",{class:"breadcrumb-item active"},"Orders",-1)),se={class:"container-fluid"},oe={class:"row"},ae={class:"col-sm-12"},le={class:"card"},ie=u(()=>t("div",{class:"card-header py-4"},[t("form",{class:"form-inline search-form search-box"},[t("div",{class:"form-group"},[t("input",{class:"form-control-plaintext",type:"search",placeholder:"Search.."})])])],-1)),de={class:"card-body"},ne={class:"table-responsive table-desi"},ce={class:"review-table table"},re=u(()=>t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Order No."),t("th",null,"User"),t("th",null,"Items"),t("th",null,"Amount"),t("th",null,"Status"),t("th",null,"Created On"),t("th")])],-1)),_e=u(()=>t("td",null,null,-1)),ue=["onClick"],he={key:1},me=u(()=>t("td",{colspan:"8",class:"text-center"},[t("h4",{class:"mb-0"},[t("i",{class:"fa fa-exclamation-triangle"}),M(" No orders found.")])],-1)),pe=[me],ve={key:0,class:"col-12 py-4 d-flex justify-content-center"},fe=C({__name:"Orders",setup(h,{expose:p}){const s=H(),b=A(),a=S("$api");S("$swal");const m=D,r=d.isEmpty,o=F({orders:Object(),errors:Object(),form:{first_name:"",last_name:"",email:""},loader:{register:!1},isDisabled:!0,modals:{edit:!1},view:Object()}),v=z([]);p({buttonOrders:v}),Q().shape({first_name:O().required("*First name is required"),email:O().email("*Enter a valid email address").required("*Email address is required"),last_name:O().required("*Last name is required")});const T=(y={page:1,limit:10})=>{s.commit("loader",!0);let{page:_,limit:l}=y,f=`/dashboard/orders?page=${_}&limit=${l}`;a.get(f).then(({data:{orders:w}})=>{o.orders=d.cloneDeep(w),o.orders.items=o.orders.items.map(x=>(x.total=d.sum(x.items.map(k=>k.price*k.quantity)),x))}).catch(({response:w})=>{s.commit("loader",!1)}).finally(()=>{s.commit("loader",!1)})},P=async(y,_)=>{v.value[_].innerHTML='<i class="fa fa-spinner fa-spin fa-sm text-white"></i>';try{let{data:{order:l}}=await a.put(`/dashboard/orders/${y}/view`);o.view=d.cloneDeep(l),o.modals.edit=!0,v.value[_].innerHTML="View"}catch{v.value[_].innerHTML="View"}},V=()=>{o.modals.edit=!1,o.view=Object()},B=()=>{console.log(arguments)};return U(()=>T()),(y,_)=>(n(),c("div",null,[t("div",Gt,[t("div",Kt,[t("div",Qt,[Rt,t("div",Jt,[t("ol",Wt,[t("li",Xt,[t("a",{href:"#",onClick:_[0]||(_[0]=j(l=>i(b).push({name:"Overview"}),["prevent"]))},[Zt,M(" Overview ")])]),te,ee])])])])]),t("div",se,[t("div",oe,[t("div",ae,[t("div",le,[ie,t("div",de,[t("div",ne,[t("table",ce,[re,t("tbody",null,[i(d.isEmpty)(o.orders)?(n(),c("tr",he,pe)):(n(!0),c(I,{key:0},N(o.orders.items,(l,f)=>(n(),c("tr",{key:f},[t("td",null,e(f+1),1),t("td",null,e(l.num_id),1),_e,t("td",null,e(l.items.length),1),t("td",null,"KSH "+e(l.total),1),t("td",null,e(l.status),1),t("td",null,e(i(m)(l.created_at).format("Do MMMM, Y hh:mm:ss")),1),t("td",null,[t("a",{href:"#",onClick:j(w=>P(l.id,f),["prevent"]),class:"btn btn-primary p-2 btn-sm",ref_for:!0,ref_key:"buttonOrders",ref:v}," View ",8,ue)])]))),128))])])]),i(r)(o.orders)?g("",!0):(n(),c("div",ve,[q(i(R),{"page-count":o.orders.meta.itemCount,"click-handler":B,"prev-text":"Prev","next-text":"Next","container-class":"className"},null,8,["page-count"])])),q(i(Yt),{data:o.view,show:o.modals.edit,onUpdateModal:V},null,8,["data","show"])])])])])])]))}}),xe=K(fe,[["__scopeId","data-v-f0186643"]]);export{xe as default};
