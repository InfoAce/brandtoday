import{u as E,a as S,i as d,r as k,A as q,d as C,e as A,f as D,g as s,n as m,p as u,w as V,k as c,B as h,v as _,h as p,t as f,j as b,l as r,C as $}from"./index-BX7DgPRM.js";import{c as B,a as g}from"./index.esm-BakSTS1U.js";const L={class:"breadcrumb-section"},N={class:"container"},O={class:"row"},R=s("div",{class:"col-sm-6"},[s("div",{class:"page-title"},[s("h2",null,"customer's login")])],-1),T={class:"col-sm-6"},j={"aria-label":"breadcrumb",class:"theme-breadcrumb"},M={class:"breadcrumb"},P={class:"breadcrumb-item"},U=s("li",{class:"breadcrumb-item active"},"login",-1),Y={class:"login-page section-b-space"},F={class:"container"},H={class:"row"},I={class:"col-lg-6"},z=s("h3",null,"Login",-1),G={class:"theme-card"},J={class:"form-group"},K=s("label",{for:"email"},"Email",-1),Q={class:"form-group"},W=s("label",{for:"password"},"Password",-1),X=["disabled"],Z={class:"col-lg-6 right-login"},ss=s("h3",null,"New Customer",-1),ts={class:"theme-card authentication-right"},es=s("h6",{class:"title-font"},"Create A Account",-1),os=s("p",null,"Sign up for a free account at our store. Registration is quick and easy. It allows you to be able to order from our shop. To start shopping click register.",-1),ls={__name:"Login",setup(as){const i=E();S();const v=d("$api"),l=d("$swal"),t=k({errors:{},form:{email:"",password:""},isDisabled:!0}),w=B().shape({email:g().email("*Enter a valid email address").required("*Email address is required"),password:g().required("*Password is required")}),y=e=>{w.validateAt(e,t.form).then((o,a)=>{delete t.errors[e]}).catch(o=>{t.errors[o.path]=o.message}).finally(()=>{t.isDisabled=!r.isEmpty(t.errors)})},x=()=>{i.commit("loader",!0),v.post("/auth/login",t.form).then(({data:{user:e,token:o}})=>{i.commit("auth",{user:e,token:o}),l.fire({icon:"success",title:"Alright!",text:"Login successfull."}).then(a=>{window.location.reload()})}).catch(({response:e})=>{i.commit("loader",!1),!r.isEmpty(e.data)&&e.data.statusCode==400&&e.data.message.forEach(o=>{$.info(o)}),e.status==404&&l.fire({icon:"error",title:"Oops!",text:"Sorry we could not your account. Register a new account."}),e.status==401&&l.fire({icon:"error",title:"Oops!",text:"Your email or password is incorrect."}),e.status==403&&l.fire({icon:"error",title:"Oops!",text:"Your account has not been verified"})}).finally(()=>{i.commit("loader",!1)})};return q(()=>t.form,e=>{r.each(e,(o,a)=>{y(a)})},{deep:!0}),(e,o)=>{const a=C("router-link");return A(),D("div",null,[s("div",L,[s("div",N,[s("div",O,[R,s("div",T,[s("nav",j,[s("ol",M,[s("li",P,[m(a,{to:"/"},{default:u(()=>[b("Home")]),_:1})]),U])])])])])]),s("section",Y,[s("div",F,[s("div",H,[s("div",I,[z,s("div",G,[s("form",{class:"theme-form",onSubmit:V(x,["prevent"])},[s("div",J,[K,c(s("input",{type:"text",class:"form-control mb-2",id:"email",placeholder:"Email","onUpdate:modelValue":o[0]||(o[0]=n=>t.form.email=n),required:""},null,512),[[h,t.form.email]]),c(s("p",{class:"text-danger col col-12 mt-0"},f(t.errors.email),513),[[_,p(r.has)(t.errors,"email")]])]),s("div",Q,[W,c(s("input",{type:"password",class:"form-control mb-2",id:"password","onUpdate:modelValue":o[1]||(o[1]=n=>t.form.password=n),placeholder:"Enter your password",required:""},null,512),[[h,t.form.password]]),c(s("p",{class:"text-danger col col-12 mt-0"},f(t.errors.password),513),[[_,p(r.has)(t.errors,"password")]])]),s("button",{type:"submit",class:"btn btn-solid",disabled:t.isDisabled},"Login",8,X)],32)])]),s("div",Z,[ss,s("div",ts,[es,os,m(a,{to:"signup",class:"btn btn-solid"},{default:u(()=>[b("Create an Account")]),_:1})])])])])])])}}};export{ls as default};
